drop database if exists booksak;
create database booksak;
use booksak;

UNLOCK TABLES;
drop table if exists users;
CREATE TABLE users (
  userid varchar(50) NOT NULL,
  userpw varchar(255) NOT NULL,
  username varchar(100) NOT NULL,
  birth date DEFAULT NULL,
  addr varchar(255) not null,
  PRIMARY KEY (userid)
);
truncate table users;
INSERT INTO users VALUES 
('hyunbum','pass123','최현범','1996-07-19', "경기도 화성시 동탄중앙로 51 101-101"),
('jaeho','pass123','장재호','1990-01-01', "경기도 화성시 동탄중앙로 51 101-102"),
('junhong','pass123','김준홍','1999-04-19', "경기도 화성시 동탄중앙로 51 101-103"),
('seoyeong','pass123','임서영','1997-10-25', "경기도 화성시 동탄중앙로 51 101-104"),
('jina','pass123','김진아','2005-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('sihyun','pass123','박시현','2004-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('hwiyong','pass123','장휘용','2003-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('juun','pass123','김주언','2002-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('minkyu','pass123','박민규','2001-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('jeongtae','pass123','조정태','2000-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('changhyun','pass123','지창현','1999-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('seona','pass123','최선아','1998-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원"),
('saeryung','pass123','장세령','1997-01-01', "서울특별시 서초구 서초동 1318-2 8층 하이미디어학원");

drop table if exists user_reward;
create table user_reward(
	userid varchar(50) NOT NULL,
    userpoints int default 0,
    foreign key (userid) references users (userid)
);
insert into user_reward (userid) select userid from users;

drop table if exists books;
CREATE TABLE books (
  bookid int NOT NULL AUTO_INCREMENT,
  title varchar(255) NOT NULL,
  author varchar(100) DEFAULT NULL,
  publisher varchar(100) DEFAULT NULL,
  introduce text,
  category varchar(50) DEFAULT NULL,
  keyword varchar(255) DEFAULT NULL,
  pages int DEFAULT NULL,
  PRIMARY KEY (bookid)
);
INSERT INTO books VALUES (1,'해리포터와 마법사의 돌','J.K. 롤링','문학수첩','마법 세계로 들어가는 소년 해리의 모험 이야기.','판타지','모험,마법,우정,신비',336),(2,'아침형 인간','제프 샌더스','한빛비즈','아침 시간을 활용해 생산성을 높이는 자기계발서.','자기계발','동기부여,성공,에너지,긍정',288),(3,'파친코','이민진','문학동네','한국 이민 가정의 대서사시, 가족과 사랑의 이야기.','소설','가족,사랑,역사,감동',560),(4,'82년생 김지영','조남주','민음사','한국 여성의 삶을 그린 현대 소설.','소설','공감,사회,여성,슬픔',192),(5,'데미안','헤르만 헤세','민음사','자아를 찾아가는 청년의 성장 이야기.','고전','성장,철학,내면,영감',208),(6,'달러구트 꿈 백화점','이미예','팩토리나인','꿈을 파는 백화점에서 펼쳐지는 따뜻한 이야기.','판타지','공감,행복,꿈,감동',300),(7,'미움받을 용기','기시미 이치로','인플루엔셜','아들러 심리학을 기반으로 한 자기계발서.','자기계발','자유,성장,영감,긍정',336),(8,'오만과 편견','제인 오스틴','펭귄클래식','사랑과 오해를 다룬 고전 로맨스 소설.','고전','사랑,로맨스,사회,감동',480),(9,'자존감 수업','윤홍균','심플라이프','자존감을 높이는 실용적인 조언.','자기계발','자신감,긍정,내면,성장',304),(10,'채식주의자','한강','창비','인간과 자연의 경계를 탐구하는 소설.','소설','철학,사회,내면,슬픔',248),(11,'호빗','J.R.R. 톨킨','씨앗을뿌리는사람','호빗 빌보의 모험을 다룬 판타지 소설.','판타지','모험,우정,용기,신비',400),(12,'아몬드','손원평','창비','감정을 느끼지 못하는 소년의 성장 이야기.','소설','공감,성장,감동,가족',264),(13,'생각의 탄생','로버트 루트번스타인','에코의서재','창의적 사고를 키우는 방법.','자기계발','영감,창의력,성공,철학',528),(14,'연금술사','파울로 코엘료','문학동네','꿈을 찾아 떠나는 청년의 여정.','소설','영감,모험,내면,꿈',224),(15,'죽음의 수용소에서','빅터 프랭클','청아출판사','홀로코스트 생존자의 삶의 의미 탐구.','에세이','철학,내면,영감,감동',200),(16,'작은 아씨들','루이자 메이 올콧','문학수첩','네 자매의 사랑과 성장 이야기.','고전','가족,사랑,성장,감동',700),(17,'멈추면 비로소 보이는 것들','혜민','수오서재','마음의 평화를 찾는 에세이.','에세이','공감,긍정,내면,행복',288),(18,'나미야 잡화점의 기적','히가시노 게이고','현대문학','편지를 통해 연결되는 사람들의 이야기.','소설','공감,감동,우정,신비',456),(19,'1Q84','무라카미 하루키','문학동네','사랑과 운명을 다룬 현대 소설.','소설','사랑,신비,철학,감동',650),(20,'자유로부터의 도피','에리히 프롬','나남출판','인간의 자유와 책임에 대한 심리학 서적.','인문','철학,사회,내면,영감',352),(21,'앵무새 죽이기','하퍼 리','열린책들','인종차별과 정의를 다룬 고전 소설.','고전','사회,공감,감동,성장',416),(22,'미움받을 용기 2','기시미 이치로','인플루엔셜','아들러 심리학의 후속편.','자기계발','자유,영감,긍정,성장',304),(23,'소년이 온다','한강','창비','5.18 광주를 배경으로 한 소설.','소설','역사,슬픔,공감,감동',216),(24,'시간을 파는 상점','김선영','자음과모음','시간을 거래하는 아이들의 이야기.','소설','우정,성장,공감,신비',248),(25,'타이탄의 도구들','팀 페리스','토네이도','성공한 사람들의 습관과 도구.','자기계발','성공,동기부여,에너지,영감',736),(26,'위대한 개츠비','F. 스콧 피츠제럴드','펭귄클래식','아메리칸 드림을 다룬 고전.','고전','사랑,사회,꿈,슬픔',240),(27,'공기놀이','이희영','문학동네','가족과 치유를 다룬 소설.','소설','가족,공감,감동,내면',232),(28,'미래를 여는 기술','에이미 웹','김영사','기술과 인간의 미래를 탐구.','인문','영감,철학,사회,성공',368),(29,'꽃잎이 떨어질 때','김영하','문학동네','인간관계를 다룬 단편집.','소설','공감,사랑,내면,감동',280),(30,'삶의 기술','에픽테토스','나남출판','스토아 철학으로 삶을 다루다.','인문','철학,내면,긍정,영감',160),(31,'곰돌이 푸, 행복한 일은 매일 있어','A.A. 밀른','윌북','곰돌이 푸의 따뜻한 이야기.','에세이','행복,우정,공감,긍정',240),(32,'지적 대화를 위한 넓고 얕은 지식','채사장','한빛비즈','다양한 주제의 지식을 쉽게 설명.','인문','영감,철학,사회,성공',380),(33,'설득의 심리학','로버트 치알디니','21세기북스','설득과 영향력의 비밀.','자기계발','성공,동기부여,사회,영감',640),(34,'빛의 과거','은희경','문학동네','가족과 시간을 다룬 소설.','소설','가족,공감,감동,내면',368),(35,'내 심장을 쏴라','정유정','은행나무','긴박한 심리 스릴러 소설.','소설','신비,공감,사회,슬픔',520),(36,'하버드 상위 1퍼센트의 비밀','정주영','한국경제신문','성공의 비결을 다룬 자기계발서.','자기계발','성공,동기부여,에너지,영감',304),(37,'노인과 바다','어니스트 헤밍웨이','민음사','노인의 용기와 투쟁을 다룬 고전.','고전','성장,철학,내면,감동',150),(38,'우리가 빛의 속도로 갈 수 없다면','김초엽','허블','SF와 인간의 이야기를 다룬 소설.','소설','공감,철학,감동,신비',328),(39,'아침의 피아노','김연수','문학동네','일상 속 따뜻한 순간을 담은 에세이.','에세이','공감,행복,내면,감동',248),(40,'리더의 용기','브레네 브라운','북하우스','리더십과 용기를 다룬 자기계발서.','자기계발','영감,성공,성장,긍정',368),(41,'모비 딕','허먼 멜빌','펭귄클래식','고래를 쫓는 선장의 집념.','고전','모험,철학,내면,신비',800),(42,'경험의 기술','칩 히스','웅진지식하우스','경험을 설계하는 방법.','자기계발','영감,성공,창의력,긍정',360),(43,'인간 실격','다자이 오사무','민음사','인간성의 상실을 다룬 일본 고전.','고전','슬픔,내면,철학,사회',192),(44,'너무 시끄러운 고독','보후밀 흐라발','문학동네','고독과 삶을 다룬 소설.','소설','내면,공감,슬픔,철학',160),(45,'미래의 부','앨빈 토플러','세종서적','미래 사회의 변화를 예측.','인문','영감,철학,사회,성공',500),(46,'아가미','구병모','위즈덤하우스','인간과 자연의 경계를 다룬 소설.','소설','공감,철학,감동,신비',320),(47,'멈출 수 없는 사람들','존 맥스웰','비즈니스북스','성공을 위한 끊임없는 노력.','자기계발','성공,동기부여,에너지,영감',320),(48,'눈먼 자들의 도시','주제 사라마구','해냄','문명 붕괴를 다룬 소설.','소설','사회,철학,슬픔,신비',464),(49,'내가 너를 응원해','공지영','창비','따뜻한 위로를 전하는 에세이.','에세이','공감,행복,감동,긍정',256),(50,'호밀밭의 파수꾼','J.D. 샐린저','민음사','청춘의 방황을 다룬 고전.','고전','성장,내면,공감,슬픔',300),(51,'별의 계승자','제임스 P. 호건','황금가지','외계 문명을 탐구하는 SF 소설.','판타지','모험,신비,철학,영감',416),(52,'목소리를 드릴게요','정세랑','아작','따뜻한 현대 소설.','소설','공감,사랑,감동,행복',312),(53,'습관의 힘','찰스 두히그','갤리온','습관이 삶을 바꾸는 방법.','자기계발','성공,동기부여,성장,긍정',416),(54,'바람이 분다 당신이 좋다','이병률','달','여행과 감성을 담은 에세이.','에세이','공감,행복,내면,감동',312),(55,'죄와 벌','표도르 도스토옙스키','민음사','도덕과 죄를 다룬 고전.','고전','철학,내면,사회,슬픔',900),(56,'빅 픽처','더글러스 케네디','밝은세상','삶의 전환점을 다룬 소설.','소설','성장,공감,내면,감동',544),(57,'지금 이 순간','기욤 뮈소','밝은세상','시간 여행과 사랑 이야기.','소설','사랑,신비,감동,꿈',400),(58,'리딩으로 리드하라','이지성','차이정원','독서로 성공을 이끄는 법.','자기계발','영감,성공,동기부여,성장',352),(59,'달과 6펜스','서머싯 몸','민음사','예술과 자유를 추구하는 삶.','고전','내면,철학,영감,성장',352),(60,'여행의 기술','알랭 드 보통','청미래','여행이 주는 깨달음.','에세이','공감,철학,내면,영감',320),(61,'고도를 기다리며','사무엘 베케트','민음사','인간 존재의 부조리를 다룬 희곡.','고전','철학,내면,사회,슬픔',160),(62,'마음의 지도','최인철','한겨레출판','행복의 심리학을 탐구.','인문','행복,공감,철학,긍정',328),(63,'별의 시간','김애란','문학동네','일상의 아름다움을 담은 소설.','소설','공감,감동,내면,행복',288),(64,'성공의 심리학','캐럴 드웩','한빛비즈','마인드셋으로 성공을 이루다.','자기계발','성공,동기부여,성장,영감',352),(65,'바다로 간 산','최은영','문학동네','자연과 인간의 조화를 다룬 소설.','소설','공감,철학,감동,내면',312),(66,'철학의 숲','브렌던 윌슨','김영사','철학의 기본 개념을 쉽게 설명.','인문','철학,영감,내면,성장',350),(67,'꿈꾸는 다락방','이적','김영사','꿈과 창작의 이야기를 담은 에세이.','에세이','영감,행복,공감,꿈',336),(68,'영혼의 연금술','제임스 힐먼','나남출판','심리학과 영혼의 연결.','인문','철학,내면,영감,성장',384),(69,'가시나무새','콜린 맥컬로','문학수첩','사랑과 희생을 다룬 대서사시.','소설','사랑,감동,가족,슬픔',800),(70,'창의력의 비밀','켄 로빈슨','학지사','창의력을 키우는 교육법.','자기계발','영감,창의력,성공,긍정',352),(71,'여행자의 밤','백영옥','문학동네','여행 속에서 만난 사람들의 이야기.','소설','공감,감동,내면,행복',288),(72,'인간의 조건','한나 아렌트','한길사','인간의 삶과 사회를 분석.','인문','철학,사회,내면,영감',512),(73,'하늘과 바람과 별과 시','윤동주','창비','한국 시인의 대표 시집.','에세이','공감,감동,내면,행복',160),(74,'미래의 나를 만드는 법','앤서니 로빈스','한빛비즈','목표 달성을 위한 자기계발.','자기계발','성공,동기부여,에너지,영감',600),(75,'종이 동물원','켄 리우','황금가지','SF와 인간의 이야기를 담은 단편집.','소설','공감,철학,신비,감동',528),(76,'삶의 의미','테리 이글턴','김영사','삶과 철학의 본질 탐구.','인문','철학,내면,영감,성장',200),(77,'내가 사랑한 유럽 TOP10','한정원','중앙북스','유럽 여행의 감성을 담은 에세이.','에세이','행복,공감,내면,감동',320),(78,'은하수를 여행하는 히치하이커를 위한 안내서','더글러스 애덤스','황금가지','유머 넘치는 SF 소설.','판타지','모험,신비,우정,영감',288),(79,'오래된 미래','헬레나 노르베리 호지','김영사','지속 가능한 삶을 탐구.','인문','철학,사회,영감,긍정',304),(80,'너의 이름은','신카이 마코토','대원씨아이','시간과 운명을 다룬 애니메이션 소설.','소설','사랑,신비,감동,꿈',280),(81,'성장의 비밀','대니얼 코일','한빛비즈','재능과 성장을 다룬 자기계발서.','자기계발','성공,동기부여,성장,영감',320),(82,'바람의 열두 방향','어슐러 K. 르 귄','황금가지','판타지와 철학이 담긴 단편집.','판타지','모험,철학,내면,영감',368),(83,'아침의 문','김남중','문학동네','일상의 소소한 행복을 담은 소설.','소설','공감,행복,감동,내면',256),(84,'철학자의 돌','마리 루이스 폰 프란츠','나남출판','심리학과 신화를 다룬 인문서.','인문','철학,내면,영감,성장',320),(85,'그리스인 조르바','니코스 카잔차키스','열린책들','자유로운 삶을 다룬 고전.','고전','자유,철학,내면,영감',480),(86,'사피엔스','유발 하라리','김영사','인류의 역사를 다룬 인문서.','인문','철학,사회,영감,성장',600),(87,'빛나는 순간','최은영','문학동네','인간관계와 사랑을 다룬 소설.','소설','공감,사랑,감동,내면',288),(88,'미래를 위한 선택','짐 론','비즈니스북스','성공을 위한 삶의 선택.','자기계발','성공,동기부여,에너지,영감',288),(89,'별을 스치는 바람','이정명','은행나무','조선 시대의 모험을 다룬 소설.','소설','모험,역사,감동,신비',600),(90,'삶의 예술','에리히 프롬','나남출판','사랑과 삶의 본질을 다룬 인문서.','인문','철학,사랑,내면,영감',256),(91,'꿈의 해석','지그문트 프로이트','열린책들','무의식과 꿈을 분석한 심리학.','인문','철학,내면,영감,성장',800),(92,'여름의 끝','최수철','문학동네','여름의 추억을 다룬 소설.','소설','공감,감동,내면,행복',280),(93,'성공의 기술','데일 카네기','중앙북스','인간관계와 성공의 비결.','자기계발','성공,동기부여,사회,영감',350),(94,'바람의 그림자','카를로스 루이스 사폰','민음사','책과 비밀을 다룬 소설.','소설','신비,공감,감동,철학',608),(95,'하늘을 나는 교실','에리히 캐스트너','비룡소','우정과 모험을 다룬 고전.','고전','우정,모험,성장,감동',224),(96,'미래의 직업','토마스 프레이','비즈니스북스','미래 직업의 변화를 예측.','인문','영감,사회,성공,철학',352),(97,'너무 늦기 전에','공지영','창비','삶과 사랑을 다룬 에세이.','에세이','공감,사랑,감동,행복',288),(98,'별의 유산','로이스 뷰엘','황금가지','우주를 배경으로 한 SF 소설.','판타지','모험,신비,철학,영감',350),(99,'마음의 평화','달라이 라마','김영사','내면의 평화를 찾는 에세이.','에세이','행복,공감,내면,긍정',224),(100,'영혼의 숲','최인호','문학동네','자연과 인간을 다룬 소설.','소설','공감,철학,감동,내면',320),(101,'성공의 법칙','나폴레온 힐','비즈니스북스','성공을 위한 실용적인 조언.','자기계발','성공,동기부여,에너지,영감',500),(102,'시간의 화살','마틴 에이미스','민음사','시간과 삶을 다룬 소설.','소설','철학,내면,감동,신비',240),(103,'삶의 지혜','아르투르 쇼펜하우어','을유문화사','철학으로 삶을 바라보다.','인문','철학,내면,영감,성장',288),(104,'여행의 끝','최진영','문학동네','여행과 이별을 다룬 소설.','소설','공감,감동,내면,슬픔',288),(105,'미래의 리더','사이먼 시넥','한빛비즈','리더십의 새로운 패러다임.','자기계발','영감,성공,성장,긍정',304),(106,'별빛 아래','김영하','문학동네','일상의 아름다움을 담은 단편집.','소설','공감,감동,내면,행복',300),(107,'철학의 위안','알랭 드 보통','청미래','철학으로 삶의 위안을 얻다.','인문','철학,공감,내면,영감',288),(108,'하늘의 노래','최은미','문학동네','음악과 사랑을 다룬 소설.','소설','사랑,공감,감동,행복',312),(109,'성공의 비밀','말콤 글래드웰','김영사','성공의 숨겨진 요인을 탐구.','자기계발','성공,동기부여,영감,성장',336),(110,'바다의 꿈','김연수','문학동네','바다를 배경으로 한 모험 소설.','소설','모험,공감,감동,신비',352),(111,'삶의 중심','롤로 메이','나남출판','인간의 존재와 자유를 다룬 인문서.','인문','철학,내면,영감,성장',320),(112,'별을 쫓는 아이','정세랑','창비','꿈과 우정을 다룬 소설.','소설','우정,공감,감동,꿈',304),(113,'미래의 설계','대니얼 핑크','한빛비즈','미래를 준비하는 사고법.','자기계발','영감,성공,성장,긍정',320),(114,'시간의 정원','최은영','문학동네','시간과 사랑을 다룬 소설.','소설','사랑,공감,감동,내면',312),(115,'철학의 빛','마르틴 하이데거','한길사','존재와 철학을 탐구.','인문','철학,내면,영감,성장',450),(116,'하늘의 약속','김애란','문학동네','가족과 희망을 다룬 소설.','소설','가족,공감,감동,행복',296),(117,'성공의 열쇠','앤드류 카네기','비즈니스북스','성공을 위한 실질적 조언.','자기계발','성공,동기부여,에너지,영감',288),(118,'바람의 언덕','최진영','문학동네','자유와 꿈을 다룬 소설.','소설','자유,공감,감동,꿈',304),(119,'삶의 깊이','칼 구스타프 융','나남출판','심리학과 삶의 의미.','인문','철학,내면,영감,성장',400),(120,'별의 속삭임','김영하','문학동네','일상의 신비를 담은 소설.','소설','공감,신비,감동,내면',300),(121,'미래의 꿈','로버트 기요사키','한빛비즈','부와 성공을 다룬 자기계발서.','자기계발','성공,동기부여,에너지,영감',368),(122,'하늘의 빛','최은미','문학동네','사랑과 치유를 다룬 소설.','소설','사랑,공감,감동,행복',320),(123,'철학의 정원','볼프강 에른스트','김영사','철학의 기초를 다룬 인문서.','인문','철학,내면,영감,성장',380),(124,'바다의 속삭임','최수철','문학동네','바다와 인간을 다룬 소설.','소설','공감,철학,감동,내면',300),(125,'성공의 길','토니 로빈스','비즈니스북스','성공을 위한 동기부여.','자기계발','성공,동기부여,에너지,영감',384),(126,'시간의 바람','김애란','문학동네','시간과 추억을 다룬 소설.','소설','공감,감동,내면,행복',300),(127,'삶의 노래','니체','나남출판','철학과 삶의 열정을 다룬 인문서.','인문','철학,내면,영감,성장',320),(128,'별의 여행','정세랑','창비','모험과 우정을 다룬 소설.','소설','모험,우정,감동,꿈',312),(129,'미래의 비전','피터 드러커','한빛비즈','미래를 설계하는 자기계발서.','자기계발','영감,성공,성장,긍정',352),(130,'하늘의 꿈','최은영','문학동네','꿈과 사랑을 다룬 소설.','소설','사랑,공감,감동,꿈',320),(131,'철학의 길','칼 포퍼','한길사','철학의 본질을 탐구.','인문','철학,내면,영감,성장',256),(132,'바다의 노래','김영하','문학동네','바다와 인간의 이야기를 다룬 소설.','소설','공감,철학,감동,내면',300),(133,'성공의 꿈','잭 웰치','비즈니스북스','성공을 위한 리더십.','자기계발','성공,동기부여,에너지,영감',352),(134,'시간의 빛','최진영','문학동네','시간과 사랑을 다룬 소설.','소설','사랑,공감,감동,내면',304),(135,'삶의 비밀','에머슨','나남출판','삶과 철학을 다룬 인문서.','인문','철학,내면,영감,성장',288),(136,'별의 노래','최은미','문학동네','음악과 우정을 다룬 소설.','소설','우정,공감,감동,행복',320),(137,'미래의 열쇠','스티븐 코비','한빛비즈','성공을 위한 자기계발.','자기계발','성공,동기부여,성장,영감',448),(138,'하늘의 정원','김애란','문학동네','정원과 사랑을 다룬 소설.','소설','사랑,공감,감동,행복',312),(139,'철학의 꿈','존 듀이','한길사','철학과 교육을 다룬 인문서.','인문','철학,내면,영감,성장',400),(140,'바다의 빛','정세랑','창비','바다와 꿈을 다룬 소설.','소설','공감,감동,꿈,내면',304),(141,'성공의 정원','짐 론','비즈니스북스','성공을 위한 삶의 조언.','자기계발','성공,동기부여,에너지,영감',304),(142,'시간의 노래','최은영','문학동네','시간과 추억을 다룬 소설.','소설','공감,감동,내면,행복',320),(143,'삶의 빛','칸트','나남출판','철학과 삶의 본질.','인문','철학,내면,영감,성장',350),(144,'별의 정원','김영하','문학동네','정원과 인간을 다룬 소설.','소설','공감,철학,감동,내면',300),(145,'미래의 노래','존 맥스웰','한빛비즈','리더십과 성공의 비결.','자기계발','성공,동기부여,성장,영감',368),(146,'하늘의 노래','최진영','문학동네','음악과 사랑을 다룬 소설.','소설','사랑,공감,감동,행복',312),(147,'철학의 노래','헤겔','한길사','철학과 존재를 다룬 인문서.','인문','철학,내면,영감,성장',320),(148,'바다의 정원','최은미','문학동네','바다와 인간의 이야기를 다룬 소설.','소설','공감,철학,감동,내면',320),(149,'성공의 빛','데니스 웨이틀리','비즈니스북스','성공을 위한 동기부여.','자기계발','성공,동기부여,에너지,영감',640),(150,'시간의 정원','김애란','문학동네','시간과 사랑을 다룬 소설.','소설','사랑,공감,감동,내면',312),(151,'삶의 정원','쇼펜하우어','나남출판','철학과 삶의 본질.','인문','철학,내면,영감,성장',300),(152,'별의 빛','정세랑','창비','꿈과 우정을 다룬 소설.','소설','우정,공감,감동,꿈',304),(153,'미래의 빛','토니 로빈스','한빛비즈','성공을 위한 자기계발.','자기계발','성공,동기부여,성장,영감',550),(154,'하늘의 빛','최은영','문학동네','사랑과 치유를 다룬 소설.','소설','사랑,공감,감동,행복',320),(155,'철학의 정원','러셀','한길사','철학과 삶을 다룬 인문서.','인문','철학,내면,영감,성장',380),(156,'바다의 노래','김영하','문학동네','바다와 인간을 다룬 소설.','소설','공감,철학,감동,내면',300),(157,'성공의 노래','나폴레온 힐','비즈니스북스','성공을 위한 실용적 조언.','자기계발','성공,동기부여,에너지,영감',450),(158,'별의 정원','최은미','문학동네','정원과 인간을 다룬 소설.','소설','공감,철학,감동,내면',300),(159,'미래의 정원','스티븐 코비','한빛비즈','성공을 위한 자기계발.','자기계발','성공,동기부여,성장,영감', 421),(160,'하늘의 정원','김애란','문학동네','사랑과 희망을 다룬 소설.','소설','사랑,공감,감동,행복',312),(161,'철학의 빛','칼 포퍼','한길사','철학과 삶의 본질.','인문','철학,내면,영감,성장',450),(162,'성공의 빛','잭 웰치','비즈니스북스','성공을 위한 리더십.','자기계발','성공,동기부여,에너지,영감',870),(163,'시간의 정원','최은영','문학동네','시간과 추억을 다룬 소설.','소설','공감,감동,내면,행복',312),(164,'삶의 정원','칸트','나남출판','철학과 삶의 본질.','인문','철학,내면,영감,성장',300),(165,'별의 노래','김영하','문학동네','음악과 우정을 다룬 소설.','소설','우정,공감,감동,행복',320),(166,'철학의 정원','헤겔','한길사','철학과 존재를 다룬 인문서.','인문','철학,내면,영감,성장',380),(167,'성공의 정원','데니스 웨이틀리','비즈니스북스','성공을 위한 동기부여.','자기계발','성공,동기부여,에너지,영감',304),(168,'시간의 빛','김애란','문학동네','시간과 사랑을 다룬 소설.','소설','사랑,공감,감동,내면',304),(169,'삶의 빛','쇼펜하우어','나남출판','철학과 삶의 본질.','인문','철학,내면,영감,성장',350),(170,'철학의 빛','러셀','한길사','철학과 삶을 다룬 인문서.','인문','철학,내면,영감,성장',450),(171,'시간의 정원','최진영','문학동네','시간과 추억을 다룬 소설.','소설','공감,감동,내면,행복',312);
ALTER TABLE books MODIFY COLUMN bookid VARCHAR(255) NOT NULL;
SET SQL_SAFE_UPDATES = 0;
UPDATE books books
SET bookid = CONCAT('isbn', LPAD(bookid, 4, '0'));
SET SQL_SAFE_UPDATES = 1;
ALTER TABLE books
ADD price INT DEFAULT NULL;
SET SQL_SAFE_UPDATES = 0;
-- 2. pages에 따라 가격 업데이트

UPDATE books
SET price = ROUND((10000 + (pages - 100) * 40000 / 900) / 100) * 100
WHERE pages BETWEEN 100 AND 1000;
SET SQL_SAFE_UPDATES = 1;

drop table if exists userwishlist;
create table userwishlist(
    userid varchar(50) NOT NULL,
    bookid VARCHAR(255) NOT NULL,
    foreign key (userid) references users (userid),
    foreign key (bookid) references books (bookid)
);

INSERT INTO userwishlist (userid, bookid) VALUES
-- sihyun: 30개 책 (isbn0001 ~ isbn0030)
('sihyun', 'isbn0001'), ('sihyun', 'isbn0002'), ('sihyun', 'isbn0003'), ('sihyun', 'isbn0004'), ('sihyun', 'isbn0005'),
('sihyun', 'isbn0006'), ('sihyun', 'isbn0007'), ('sihyun', 'isbn0008'), ('sihyun', 'isbn0009'), ('sihyun', 'isbn0010'),
('sihyun', 'isbn0011'), ('sihyun', 'isbn0012'), ('sihyun', 'isbn0013'), ('sihyun', 'isbn0014'), ('sihyun', 'isbn0015'),
('sihyun', 'isbn0016'), ('sihyun', 'isbn0017'), ('sihyun', 'isbn0018'), ('sihyun', 'isbn0019'), ('sihyun', 'isbn0020'),
('sihyun', 'isbn0021'), ('sihyun', 'isbn0022'), ('sihyun', 'isbn0023'), ('sihyun', 'isbn0024'), ('sihyun', 'isbn0025'),
('sihyun', 'isbn0026'), ('sihyun', 'isbn0027'), ('sihyun', 'isbn0028'), ('sihyun', 'isbn0029'), ('sihyun', 'isbn0030'),
-- hyunbum: 12개 책 (isbn0031 ~ isbn0042)
('hyunbum', 'isbn0031'), ('hyunbum', 'isbn0032'), ('hyunbum', 'isbn0033'), ('hyunbum', 'isbn0034'), ('hyunbum', 'isbn0035'),
('hyunbum', 'isbn0036'), ('hyunbum', 'isbn0037'), ('hyunbum', 'isbn0038'), ('hyunbum', 'isbn0039'), ('hyunbum', 'isbn0040'),
('hyunbum', 'isbn0041'), ('hyunbum', 'isbn0042'),
-- jaeho: 12개 책 (isbn0043 ~ isbn0054)
('jaeho', 'isbn0043'), ('jaeho', 'isbn0044'), ('jaeho', 'isbn0045'), ('jaeho', 'isbn0046'), ('jaeho', 'isbn0047'),
('jaeho', 'isbn0048'), ('jaeho', 'isbn0049'), ('jaeho', 'isbn0050'), ('jaeho', 'isbn0051'), ('jaeho', 'isbn0052'),
('jaeho', 'isbn0053'), ('jaeho', 'isbn0054'),
-- junhong: 12개 책 (isbn0055 ~ isbn0066)
('junhong', 'isbn0055'), ('junhong', 'isbn0056'), ('junhong', 'isbn0057'), ('junhong', 'isbn0058'), ('junhong', 'isbn0059'),
('junhong', 'isbn0060'), ('junhong', 'isbn0061'), ('junhong', 'isbn0062'), ('junhong', 'isbn0063'), ('junhong', 'isbn0064'),
('junhong', 'isbn0065'), ('junhong', 'isbn0066'),
-- seoyeong: 12개 책 (isbn0067 ~ isbn0078)
('seoyeong', 'isbn0067'), ('seoyeong', 'isbn0068'), ('seoyeong', 'isbn0069'), ('seoyeong', 'isbn0070'), ('seoyeong', 'isbn0071'),
('seoyeong', 'isbn0072'), ('seoyeong', 'isbn0073'), ('seoyeong', 'isbn0074'), ('seoyeong', 'isbn0075'), ('seoyeong', 'isbn0076'),
('seoyeong', 'isbn0077'), ('seoyeong', 'isbn0078'),
-- jina: 12개 책 (isbn0079 ~ isbn0090)
('jina', 'isbn0079'), ('jina', 'isbn0080'), ('jina', 'isbn0081'), ('jina', 'isbn0082'), ('jina', 'isbn0083'),
('jina', 'isbn0084'), ('jina', 'isbn0085'), ('jina', 'isbn0086'), ('jina', 'isbn0087'), ('jina', 'isbn0088'),
('jina', 'isbn0089'), ('jina', 'isbn0090'),
-- hwiyong: 12개 책 (isbn0091 ~ isbn0102)
('hwiyong', 'isbn0091'), ('hwiyong', 'isbn0092'), ('hwiyong', 'isbn0093'), ('hwiyong', 'isbn0094'), ('hwiyong', 'isbn0095'),
('hwiyong', 'isbn0096'), ('hwiyong', 'isbn0097'), ('hwiyong', 'isbn0098'), ('hwiyong', 'isbn0099'), ('hwiyong', 'isbn0100'),
('hwiyong', 'isbn0101'), ('hwiyong', 'isbn0102'),
-- juun: 12개 책 (isbn0103 ~ isbn0114)
('juun', 'isbn0103'), ('juun', 'isbn0104'), ('juun', 'isbn0105'), ('juun', 'isbn0106'), ('juun', 'isbn0107'),
('juun', 'isbn0108'), ('juun', 'isbn0109'), ('juun', 'isbn0110'), ('juun', 'isbn0111'), ('juun', 'isbn0112'),
('juun', 'isbn0113'), ('juun', 'isbn0114'),
-- minkyu: 11개 책 (isbn0115 ~ isbn0125)
('minkyu', 'isbn0115'), ('minkyu', 'isbn0116'), ('minkyu', 'isbn0117'), ('minkyu', 'isbn0118'), ('minkyu', 'isbn0119'),
('minkyu', 'isbn0120'), ('minkyu', 'isbn0121'), ('minkyu', 'isbn0122'), ('minkyu', 'isbn0123'), ('minkyu', 'isbn0124'),
('minkyu', 'isbn0125'),
-- jeongtae: 11개 책 (isbn0126 ~ isbn0136)
('jeongtae', 'isbn0126'), ('jeongtae', 'isbn0127'), ('jeongtae', 'isbn0128'), ('jeongtae', 'isbn0129'), ('jeongtae', 'isbn0130'),
('jeongtae', 'isbn0131'), ('jeongtae', 'isbn0132'), ('jeongtae', 'isbn0133'), ('jeongtae', 'isbn0134'), ('jeongtae', 'isbn0135'),
('jeongtae', 'isbn0136'),
-- changhyun: 11개 책 (isbn0137 ~ isbn0147)
('changhyun', 'isbn0137'), ('changhyun', 'isbn0138'), ('changhyun', 'isbn0139'), ('changhyun', 'isbn0140'), ('changhyun', 'isbn0141'),
('changhyun', 'isbn0142'), ('changhyun', 'isbn0143'), ('changhyun', 'isbn0144'), ('changhyun', 'isbn0145'), ('changhyun', 'isbn0146'),
('changhyun', 'isbn0147'),
-- seona: 11개 책 (isbn0148 ~ isbn0158)
('seona', 'isbn0148'), ('seona', 'isbn0149'), ('seona', 'isbn0150'), ('seona', 'isbn0151'), ('seona', 'isbn0152'),
('seona', 'isbn0153'), ('seona', 'isbn0154'), ('seona', 'isbn0155'), ('seona', 'isbn0156'), ('seona', 'isbn0157'),
('seona', 'isbn0158'),
-- saeryung: 11개 책 (isbn0159 ~ isbn0169)
('saeryung', 'isbn0159'), ('saeryung', 'isbn0160'), ('saeryung', 'isbn0161'), ('saeryung', 'isbn0162'), ('saeryung', 'isbn0163'),
('saeryung', 'isbn0164'), ('saeryung', 'isbn0165'), ('saeryung', 'isbn0166'), ('saeryung', 'isbn0167'), ('saeryung', 'isbn0168'),
('saeryung', 'isbn0169'),
-- 남은 책 2개 (isbn0170, isbn0171)를 sihyun에게 추가 할당
('sihyun', 'isbn0170'), ('sihyun', 'isbn0171');

drop table if exists userlibrary;
create table userlibrary(
    userid varchar(50) NOT NULL,
    bookid VARCHAR(255) NOT NULL,
    reading_time time default "00:00:00",
    read_pages int not null default 0,
    pages int not null default 0,
    start_date date default null,
    end_date date default null,
    read_count int default 0,
	current bool not null default false,
    foreign key (userid) references users (userid),
    foreign key (bookid) references books (bookid)
);

INSERT INTO userlibrary (userid, bookid, reading_time, read_pages, start_date, end_date, read_count, current) VALUES
-- sihyun: 20개 책 (isbn0001 ~ isbn0020)
('sihyun', 'isbn0001', '00:20:00', 100, '2025-01-15', '2025-03-10', 0, false),
('sihyun', 'isbn0002', '00:30:00', 150, '2025-02-01', '2025-04-15', 0, true),
('sihyun', 'isbn0003', '00:40:00', 200, '2025-01-20', '2025-02-28', 0, false),
('sihyun', 'isbn0004', '00:50:00', 250, '2025-03-01', '2025-04-20', 0, false),
('sihyun', 'isbn0005', '00:10:00', 50, '2025-02-15', '2025-03-15', 0, false),
('sihyun', 'isbn0006', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, false),
('sihyun', 'isbn0007', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('sihyun', 'isbn0008', '00:40:00', 200, '2025-03-10', '2025-04-01', 0, false),
('sihyun', 'isbn0009', '00:50:00', 250, '2025-01-25', '2025-03-05', 0, false),
('sihyun', 'isbn0010', '00:10:00', 50, '2025-02-20', '2025-04-10', 0, false),
('sihyun', 'isbn0011', '00:20:00', 100, '2025-01-05', '2025-02-15', 0, false),
('sihyun', 'isbn0012', '00:30:00', 150, '2025-03-15', '2025-04-25', 0, false),
('sihyun', 'isbn0013', '00:40:00', 200, '2025-02-10', '2025-03-20', 0, false),
('sihyun', 'isbn0014', '00:50:00', 250, '2025-01-30', '2025-03-30', 0, false),
('sihyun', 'isbn0015', '00:10:00', 50, '2025-02-25', '2025-04-05', 0, false),
('sihyun', 'isbn0016', '00:20:00', 100, '2025-03-05', '2025-04-15', 0, false),
('sihyun', 'isbn0017', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('sihyun', 'isbn0018', '00:40:00', 200, '2025-02-15', '2025-03-25', 0, false),
('sihyun', 'isbn0019', '00:50:00', 250, '2025-03-10', '2025-04-20', 0, false),
('sihyun', 'isbn0020', '00:10:00', 50, '2025-02-05', '2025-03-15', 0, false),
-- hyunbum: 7개 책 (isbn0031 ~ isbn0037)
('hyunbum', 'isbn0031', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('hyunbum', 'isbn0032', '00:30:00', 150, '2025-02-15', '2025-03-25', 0, false),
('hyunbum', 'isbn0033', '00:40:00', 200, '2025-03-01', '2025-04-10', 0, false),
('hyunbum', 'isbn0034', '00:50:00', 250, '2025-01-20', '2025-03-05', 0, false),
('hyunbum', 'isbn0035', '00:10:00', 50, '2025-02-10', '2025-04-15', 0, false),
('hyunbum', 'isbn0036', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
('hyunbum', 'isbn0037', '00:30:00', 150, '2025-01-25', '2025-03-10', 0, false),
-- jaeho: 7개 책 (isbn0043 ~ isbn0049)
('jaeho', 'isbn0043', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('jaeho', 'isbn0044', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('jaeho', 'isbn0045', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('jaeho', 'isbn0046', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('jaeho', 'isbn0047', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('jaeho', 'isbn0048', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false),
('jaeho', 'isbn0049', '00:30:00', 150, '2025-03-01', '2025-04-25', 0, false),
-- junhong: 7개 책 (isbn0055 ~ isbn0061)
('junhong', 'isbn0055', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('junhong', 'isbn0056', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('junhong', 'isbn0057', '00:40:00', 200, '2025-03-10', '2025-04-15', 0, false),
('junhong', 'isbn0058', '00:50:00', 250, '2025-01-15', '2025-03-05', 0, false),
('junhong', 'isbn0059', '00:10:00', 50, '2025-02-20', '2025-04-20', 0, false),
('junhong', 'isbn0060', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
('junhong', 'isbn0061', '00:30:00', 150, '2025-01-25', '2025-03-10', 0, false),
-- seoyeong: 7개 책 (isbn0067 ~ isbn0073)
('seoyeong', 'isbn0067', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('seoyeong', 'isbn0068', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('seoyeong', 'isbn0069', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('seoyeong', 'isbn0070', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('seoyeong', 'isbn0071', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('seoyeong', 'isbn0072', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false),
('seoyeong', 'isbn0073', '00:30:00', 150, '2025-03-01', '2025-04-25', 0, false),
-- jina: 7개 책 (isbn0079 ~ isbn0085)
('jina', 'isbn0079', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('jina', 'isbn0080', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('jina', 'isbn0081', '00:40:00', 200, '2025-03-10', '2025-04-15', 0, false),
('jina', 'isbn0082', '00:50:00', 250, '2025-01-15', '2025-03-05', 0, false),
('jina', 'isbn0083', '00:10:00', 50, '2025-02-20', '2025-04-20', 0, false),
('jina', 'isbn0084', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
('jina', 'isbn0085', '00:30:00', 150, '2025-01-25', '2025-03-10', 0, false),
-- hwiyong: 6개 책 (isbn0091 ~ isbn0096)
('hwiyong', 'isbn0091', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('hwiyong', 'isbn0092', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('hwiyong', 'isbn0093', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('hwiyong', 'isbn0094', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('hwiyong', 'isbn0095', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('hwiyong', 'isbn0096', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false),
-- juun: 6개 책 (isbn0103 ~ isbn0108)
('juun', 'isbn0103', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('juun', 'isbn0104', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('juun', 'isbn0105', '00:40:00', 200, '2025-03-10', '2025-04-15', 0, false),
('juun', 'isbn0106', '00:50:00', 250, '2025-01-15', '2025-03-05', 0, false),
('juun', 'isbn0107', '00:10:00', 50, '2025-02-20', '2025-04-20', 0, false),
('juun', 'isbn0108', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
-- minkyu: 6개 책 (isbn0115 ~ isbn0120)
('minkyu', 'isbn0115', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('minkyu', 'isbn0116', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('minkyu', 'isbn0117', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('minkyu', 'isbn0118', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('minkyu', 'isbn0119', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('minkyu', 'isbn0120', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false),
-- jeongtae: 6개 책 (isbn0126 ~ isbn0131)
('jeongtae', 'isbn0126', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('jeongtae', 'isbn0127', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('jeongtae', 'isbn0128', '00:40:00', 200, '2025-03-10', '2025-04-15', 0, false),
('jeongtae', 'isbn0129', '00:50:00', 250, '2025-01-15', '2025-03-05', 0, false),
('jeongtae', 'isbn0130', '00:10:00', 50, '2025-02-20', '2025-04-20', 0, false),
('jeongtae', 'isbn0131', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
-- changhyun: 6개 책 (isbn0137 ~ isbn0142)
('changhyun', 'isbn0137', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('changhyun', 'isbn0138', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('changhyun', 'isbn0139', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('changhyun', 'isbn0140', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('changhyun', 'isbn0141', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('changhyun', 'isbn0142', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false),
-- seona: 6개 책 (isbn0148 ~ isbn0153)
('seona', 'isbn0148', '00:20:00', 100, '2025-01-10', '2025-02-20', 0, true),
('seona', 'isbn0149', '00:30:00', 150, '2025-02-05', '2025-03-25', 0, false),
('seona', 'isbn0150', '00:40:00', 200, '2025-03-10', '2025-04-15', 0, false),
('seona', 'isbn0151', '00:50:00', 250, '2025-01-15', '2025-03-05', 0, false),
('seona', 'isbn0152', '00:10:00', 50, '2025-02-20', '2025-04-20', 0, false),
('seona', 'isbn0153', '00:20:00', 100, '2025-03-15', '2025-04-25', 0, false),
-- saeryung: 6개 책 (isbn0159 ~ isbn0164)
('saeryung', 'isbn0159', '00:20:00', 100, '2025-02-01', '2025-03-15', 0, true),
('saeryung', 'isbn0160', '00:30:00', 150, '2025-01-15', '2025-02-25', 0, false),
('saeryung', 'isbn0161', '00:40:00', 200, '2025-03-05', '2025-04-20', 0, false),
('saeryung', 'isbn0162', '00:50:00', 250, '2025-02-10', '2025-03-30', 0, false),
('saeryung', 'isbn0163', '00:10:00', 50, '2025-01-20', '2025-03-05', 0, false),
('saeryung', 'isbn0164', '00:20:00', 100, '2025-02-15', '2025-04-10', 0, false);
SET SQL_SAFE_UPDATES = 0;
UPDATE userlibrary
SET pages = (SELECT pages FROM books WHERE books.bookid = userlibrary.bookid)
WHERE EXISTS (SELECT 1 FROM books WHERE books.bookid = userlibrary.bookid);
SET SQL_SAFE_UPDATES = 1;

drop table if exists orders;
create table orders (
	orderid int auto_increment primary key,
	userid varchar(50) NOT NULL,
	bookid VARCHAR(255) NOT NULL,
	addr varchar(255) not null,
    order_datetime datetime default now()
);

DROP TRIGGER IF EXISTS insert_user_reward;
DELIMITER //
CREATE TRIGGER insert_user_reward
AFTER insert ON users
FOR EACH ROW
BEGIN
    insert into user_reward values (new.userid, default);
END//
DELIMITER ;



drop trigger if exists update_start_date;
DELIMITER //
CREATE TRIGGER update_start_date
BEFORE UPDATE ON userlibrary
FOR EACH ROW
BEGIN
    IF NEW.start_date IS NULL THEN
        SET NEW.start_date = CURDATE();
    END IF;
	if new.read_pages >= new.pages then
		begin
			set new.read_count = new.read_count + 1;
			set new.read_pages = 0;
        end;
	end if;
END//
DELIMITER ;

DROP TRIGGER IF EXISTS update_user_reward;
DELIMITER //
CREATE TRIGGER update_user_reward
AFTER UPDATE ON userlibrary
FOR EACH ROW
BEGIN
    DECLARE point_increment INT DEFAULT 0;
    
    IF NEW.read_count > OLD.read_count THEN
        IF NEW.pages >= 900 THEN
            SET point_increment = 300;
        ELSEIF NEW.pages >= 600 THEN
            SET point_increment = 200;
        ELSEIF NEW.pages >= 300 THEN
            SET point_increment = 100;
        ELSEIF NEW.pages >= 50 THEN
            SET point_increment = 50;
        END IF;
        update user_reward set userpoints = userpoints + point_increment where userid = new.userid;
    END IF;
END//
DELIMITER ;



